æœ¬èŠ‚ç›®å½•ï¼š

- [1. Dify ä½¿ç”¨æ–¹æ³•](1-Dify-ä½¿ç”¨æ–¹æ³•)
- [2. ä½¿ç”¨ Dify äº‘æœåŠ¡](#2-ä½¿ç”¨-dify-äº‘æœåŠ¡)
- [3. ä½¿ç”¨ Docker æœ¬åœ°éƒ¨ç½² Dify ï¼ˆå¯é€‰ï¼‰](#3-ä½¿ç”¨-docker-æœ¬åœ°éƒ¨ç½²-dify-å¯é€‰)
  - [3.1 å®‰è£… Docker ](#31-å®‰è£…-docker)
  - [3.2 ä½¿ç”¨ Docker éƒ¨ç½² Dify](#32-ä½¿ç”¨-docker-éƒ¨ç½²-dify)
- [4. è¸©å‘è®°å½•ï¼š](#4-è¸©å‘è®°å½•)
- [5. Macç‰ˆæœ¬](#5macç‰ˆæœ¬)
- [6. linux terminalï¼ˆautodlï¼‰ç‰ˆæœ¬:](#6linux-terminalautodlç‰ˆæœ¬)
- [å‚è€ƒèµ„æ–™](#å‚è€ƒèµ„æ–™)

# 1. Dify ä½¿ç”¨æ–¹æ³•
Dify æä¾›äº†2ç§ä½¿ç”¨æ–¹å¼ï¼Œä¸€ç§æ˜¯ä½¿ç”¨ Dify å®˜æ–¹æä¾›çš„[äº‘æœåŠ¡](https://cloud.dify.ai/apps)ï¼Œæ— éœ€è‡ªå·±éƒ¨ç½²å³å¯ä½¿ç”¨ Dify çš„å®Œæ•´åŠŸèƒ½ã€‚æ³¨æ„ä½¿ç”¨ Dify äº‘æœåŠ¡éœ€è¦ä½ æœ‰ä¸€ä¸ª Github æˆ– Google è´¦å·ï¼›å¦ä¸€ç§æ˜¯è‡ªå·±éƒ¨ç½² Dify ç¤¾åŒºç‰ˆï¼ˆå³å¼€æºç‰ˆæœ¬ï¼‰ã€‚

å¦‚æ— æœ¬åœ°éƒ¨ç½²éœ€æ±‚ï¼Œå»ºè®®å¤§å®¶ä½¿ç”¨ Dify äº‘æœåŠ¡æ›´åŠ æ–¹ä¾¿å¿«æ·ã€‚è‹¥éœ€è¦åœ¨æœ¬åœ°éƒ¨ç½²ä½¿ç”¨ Dify ç¤¾åŒºç‰ˆï¼ŒDify æä¾›äº†ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š
- [Docker Composeéƒ¨ç½²](https://docs.dify.ai/v/zh-hans/getting-started/install-self-hosted/docker-compose)
- [æœ¬åœ°æºç å¯åŠ¨](https://docs.dify.ai/v/zh-hans/getting-started/install-self-hosted/local-source-code)

è¿™é‡Œæ¨è Docker Compose æ–¹å¼è¿›è¡Œéƒ¨ç½²ï¼Œèƒ½é¿å…è®¸å¤šç¯å¢ƒé…ç½®ä¸Šçš„å‘ã€‚

# 2. ä½¿ç”¨ Dify äº‘æœåŠ¡
é¦–å…ˆï¼Œç‚¹å‡» [è¿™é‡Œ](https://dify.ai/zh) è¿›å…¥ Dify å®˜ç½‘ï¼š

![difyå®˜ç½‘](./images/Difyå®˜ç½‘.png)

ç‚¹å‡» **å¼€å§‹ä½¿ç”¨** ï¼ˆè‹±æ–‡ç•Œé¢ç‚¹å‡» Get Startedï¼‰ï¼Œé¦–æ¬¡ä½¿ç”¨å¯ä»¥ç”¨ Github æˆ– Google è´¦å·ç™»å½•ã€‚ç™»å½•åå³å¯çœ‹åˆ°å¦‚ä¸‹é¡µé¢ï¼š

![difyé¡µé¢](./images/Difyé¡µé¢.png)

ç„¶åå°±å¯ä»¥å¼€å§‹åˆ›å»ºæˆ‘ä»¬çš„å¤§æ¨¡å‹åº”ç”¨å•¦ğŸ˜

ä¸¾ä¸ªç®€å•ä¾‹å­ï¼š
ç‚¹å‡»åˆ›å»ºç©ºç™½åº”ç”¨ -> æ–‡æœ¬ç”Ÿæˆåº”ç”¨ -> å–å -> åˆ›å»ºï¼š

![åˆ›å»ºdemo](./images/åˆ›å»ºdemo.png)

æ¥ç€å¯ä»¥åœ¨å·¦ä¾§è®¾ç½®å‰ç¼€æç¤ºè¯ï¼Œå˜é‡å‚æ•°ã€è®¿é—®apiç­‰ï¼Œåœ¨å³ä¾§é”®å…¥ç”¨æˆ·è¾“å…¥è¿›è¡Œè°ƒè¯•é¢„è§ˆï¼Œç„¶åç‚¹å‡»è¿è¡Œå³å¯çœ‹åˆ°è°ƒå¼ç»“æœï¼š

![demo](./images/demo.png)

å³ä¸Šè§’å¯ä»¥é€‰æ‹©é‡‡ç”¨çš„å¤§è¯­è¨€æ¨¡å‹ï¼Œå¹¶è®¾å®šæ¨¡å‹å‚æ•°ã€‚é»˜è®¤é‡‡ç”¨`gpt-3.5-turbo`æ¨¡å‹ï¼ŒGPT4æ¨¡å‹éœ€è¦é’èƒ½åŠ›è§£é”ã€‚

![model](./images/model.png)

ä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªç®€å•çš„ä½¿ç”¨ Dify æ­å»ºèŠå¤©åŠ©æ‰‹çš„ç¤ºä¾‹ï¼Œåç»­è¯¾ç¨‹ä¸­ä¼šå¸¦æ¥æ›´å¤šè¿›é˜¶ç©æ³•ã€‚

# 3. ä½¿ç”¨ Docker æœ¬åœ°éƒ¨ç½² Dify ï¼ˆå¯é€‰ï¼‰
å¦‚æœæ‚¨éœ€è¦æœ¬åœ°éƒ¨ç½² Difyï¼Œè¿™é‡Œæ¨èä½¿ç”¨ Docker è¿›è¡Œéƒ¨ç½²ï¼Œå¯ä»¥é¿å…å¾ˆå¤šç¯å¢ƒä¾èµ–çš„é—®é¢˜ã€‚

## 3.1 å®‰è£… Docker 
[Docker](https://www.docker.com/#) æ˜¯ä¸€ç§å®¹å™¨åŒ–å¹³å°ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…å°†åº”ç”¨ç¨‹åºåŠå…¶æ‰€æœ‰ä¾èµ–é¡¹æ‰“åŒ…åˆ°ä¸€ä¸ªæ ‡å‡†åŒ–çš„å•å…ƒä¸­ï¼Œç§°ä¸ºå®¹å™¨ã€‚è¿™ä½¿å¾—åº”ç”¨ç¨‹åºåœ¨ä¸åŒçš„ç¯å¢ƒä¸­èƒ½å¤Ÿå¿«é€Ÿã€å¯é åœ°éƒ¨ç½²å’Œè¿è¡Œï¼Œæé«˜äº†å¼€å‘ã€äº¤ä»˜å’Œè¿ç»´çš„æ•ˆç‡ã€‚

ç‚¹å‡»[Dockerå®˜ç½‘é“¾æ¥](https://www.docker.com/products/docker-desktop/)ï¼Œç„¶åé€‰æ‹©é€‚åˆè‡ªå·±ç”µè„‘ç³»ç»Ÿçš„ç‰ˆæœ¬è¿›è¡Œä¸‹è½½å®‰è£…ã€‚è¿™é‡Œä»¥ Windows ç³»ç»Ÿä¸ºä¾‹ï¼š

![Dockerå®˜ç½‘ä¸‹è½½å®‰è£…ç•Œé¢](./images/Dockerå®˜ç½‘_å®‰è£….png)

ç‚¹å‡»é€‰æ‹©**Download for Windows**ï¼Œä¸‹è½½ docker æ¡Œé¢ç‰ˆï¼Œç„¶åæŒ‰ç…§æç¤ºä¸€æ­¥æ­¥å®‰è£…å³å¯ã€‚

![docker_1](./images/docker_install_1.png)
è¿™ä¸€æ­¥éœ€è¦ç”¨åˆ° WSL 2ï¼Œä¸€ç§åœ¨ Windows æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œ Linux ç¯å¢ƒçš„æŠ€æœ¯ã€‚å¦‚æœä½ çš„ç”µè„‘ä¸æ”¯æŒçš„è¯å¯ä»¥ç½‘ä¸Šæœç´¢ç›¸å…³æ•™ç¨‹æˆ–åšå®¢è¿›è¡Œå®‰è£…ã€‚

![docker_2](./images/docker_install_2.png)
![docker_3](./images/docker_install_3.png)

ç„¶åå³å¯åœ¨ç”µè„‘æ¡Œé¢å‘ç° docker çš„å›¾æ ‡ï¼š

![docker_logo](./images/docker_logo.png)

åŒå‡»è¿è¡Œï¼š

![docker_agreement](./images/docker_agreement.png)

ç‚¹å‡» `Accept` åŒæ„ç”¨æˆ·åè®®ï¼Œç„¶åä¼šå‡ºç°ä¸€ä¸ªæ³¨å†Œç™»å½•ç•Œé¢ï¼š

![docker_login](./images/docker_login.png)

å¦‚æœä½ ä¹‹å‰å·²ç»æ³¨å†Œè¿‡ docker è´¦å·å¯ä»¥ç‚¹å‡»`Sign in`ç™»å½•ï¼Œæˆ–è€…ç‚¹å‡»`Sign up`æ³¨å†Œè´¦å·ã€‚å½“ç„¶ï¼Œæ²¡æœ‰ docker è´¦å·ä¹Ÿæ²¡å…³ç³»ï¼Œå¯ä»¥ç›´æ¥ç‚¹å‡»`Continue without signing in`è·³è¿‡è¿™ä¸€æ­¥éª¤ã€‚

æ¥ç€ä¼šæœ‰ä¸€ä¸ªè°ƒæŸ¥é—®å·ï¼š

![docker_survey](./images/docker_survey.png)

è¿™ä¸ªé—®å·å’Œä½¿ç”¨å…³ç³»ä¸å¤§ï¼Œéšä¾¿é€‰æˆ–è€…ç‚¹å‡»ä¸‹æ–¹`Skip survey`è·³è¿‡å³å¯ã€‚

![docker_UI](./images/docker_UI.png)

å½“å‡ºç°ä»¥ä¸Šç•Œé¢æ—¶å³ä»£è¡¨ docker å®‰è£…æˆåŠŸã€‚

## 3.2 ä½¿ç”¨ Docker éƒ¨ç½² Dify
ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬æ¥ä½¿ç”¨ docker éƒ¨ç½²difyã€‚

é¦–å…ˆï¼Œå…‹éš† Dify æºä»£ç è‡³æœ¬åœ°ï¼š

```bash
git clone https://github.com/langgenius/dify.git
```

![git clone](./images/git_clone.png)

ç„¶åï¼Œå¤åˆ¶ä»¥ä¸‹å‘½ä»¤ä¸€é”®éƒ¨ç½² Difyï¼š

```bash
docker compose up -d
```
>æ³¨æ„ï¼šå¦‚æœæ‚¨çš„ç³»ç»Ÿå®‰è£…äº† Docker Compose V2 è€Œä¸æ˜¯ V1ï¼Œè¯·ä½¿ç”¨ docker compose è€Œä¸æ˜¯ docker-composeã€‚é€šè¿‡$ docker compose versionæ£€æŸ¥è¿™æ˜¯å¦ä¸ºæƒ…å†µã€‚åœ¨[è¿™é‡Œ](https://docs.docker.com/compose/#compose-v2-and-the-new-docker-compose-command)é˜…è¯»æ›´å¤šä¿¡æ¯ã€‚

è¿è¡Œç»“æœï¼š

```bash
[+] Running 9/9
 âœ” Network docker_default       Created                                                                            0.1s
 âœ” Container docker-sandbox-1   Started
 âœ” Container docker-web-1       Started                                                                                      
 âœ” Container docker-db-1        Started                                                   
 âœ” Container docker-redis-1     Started                                                         
 âœ” Container docker-db-1        Started                                                   
 âœ” Container docker-redis-1     Started                                                                   
 âœ” Container docker-db-1        Started                                                   
 âœ” Container docker-redis-1     Started                                                          
 âœ” Container docker-db-1        Started                                                   
 âœ” Container docker-redis-1     Started                                                   
 âœ” Container docker-db-1        Started
 âœ” Container docker-redis-1     Started
 âœ” Container docker-weaviate-1  Started                   
 âœ” Container docker-db-1        Started                                                  
 âœ” Container docker-db-1        Started                                                   
 âœ” Container docker-redis-1     Started                                                   
 âœ” Container docker-weaviate-1  Started                                                   
 âœ” Container docker-worker-1    Started                                                   
 âœ” Container docker-api-1       Started                                                   
 âœ” Container docker-nginx-1     Started    
```

ç»“æœä¸­å…¨ä¸º âœ” è¯´æ˜éƒ¨ç½²æˆåŠŸã€‚æ¥ç€æ‰“å¼€ docker å³å¯çœ‹åˆ°éƒ¨ç½²æˆåŠŸçš„ Difyï¼š

![dify_docker](./images/dify_æœ¬åœ°dockerå¯åŠ¨.png)

ç‚¹å‡»å›¾ä¸­ç«¯å£å·`80:80`ï¼Œæ¥ç€å°±ä¼šåœ¨æµè§ˆå™¨ä¸­å¼¹å‡º Dify æœ¬åœ°é¡µé¢ï¼š

![difyæœ¬åœ°](./images/difyæœ¬åœ°.png)

è®¾ç½®å¥½ç®¡ç†å‘˜è´¦æˆ·åï¼Œç™»å½•è¿›å»å³å¯çœ‹åˆ°å’Œ Dify äº‘æœåŠ¡ç±»ä¼¼çš„é¡µé¢ï¼š

![difyæœ¬åœ°UI](./images/difyæœ¬åœ°UI.png)

æ¥ä¸‹æ¥å°±å¯ä»¥åœ¨æœ¬åœ°åˆ›å»ºè‡ªå·±çš„å¤§æ¨¡å‹åº”ç”¨äº†ğŸ˜„ã€‚

å…¶ä»–æ“ä½œç³»ç»Ÿçš„ç”µè„‘ä¹Ÿå¯ä»¥éµå¾ªè¿™ä¸ªæ­¥éª¤éƒ¨ç½²æœ¬åœ° Difyï¼š

**å®‰è£…docker -> å…‹éš† Dify ä»£ç  -> docker compose éƒ¨ç½²**ã€‚

# 4. è¸©å‘è®°å½•ï¼š
æŠ¥é”™ï¼š Error response from daemon: Get "https://registry-1.docker.io/v2/": EOF 

å¯èƒ½åŸå› ï¼šdockeræœªå“åº”ï¼Œdockerè¿˜æ²¡å¯åŠ¨ã€‚

è§£å†³æ–¹æ¡ˆï¼šæ‰“å¼€dockerï¼Œç„¶åé‡æ–°è¿è¡Œä¸€éå‘½ä»¤`docker compose up -d`å³å¯ã€‚

æŠ¥é”™ï¼š Docker Desktop Unexpected WSL error

å¯èƒ½åŸå› ï¼šwslæœªå¯åŠ¨æˆ–wslä¸åŒ¹é…

è§£å†³æ–¹æ¡ˆï¼šhttps://zhuanlan.zhihu.com/p/666788196
è‹¥å·²å®‰è£…WSLå¹¶é…ç½®ï¼Œè¯·æ‰§è¡Œ ï¼šwsl --update

# 5.Macç‰ˆæœ¬ï¼š

# 6.linux terminalï¼ˆautodlï¼‰ç‰ˆæœ¬ï¼š

#  å‚è€ƒèµ„æ–™ï¼š
[1] [Difyå®˜æ–¹æ–‡æ¡£](https://docs.dify.ai/v/zh-hans)